{
  "id": "ai--automation-workflows--t22-output-parsing",
  "version": 1,
  "subject": "AI",
  "subcategory": "Automation Workflows",
  "course_id": "ai--automation-workflows",
  "chapter_id": "ai--automation-workflows--ch03-ai-in-the-middle",
  "title": "Output Parsing",
  "emoji": "âš™ï¸",
  "color": "#EF4444",
  "description": "Reliably extracting structured data from AI responses.",
  "difficulty": "Intermediate",
  "published": true,
  "story": {
    "hook": {
      "visual": "ğŸ”§",
      "text": "The AI returns: 'The sentiment is positive, confidence 0.85.' Your next step needs {sentiment: 'positive', confidence: 0.85}. How do you reliably convert free text to structured data?"
    },
    "buildup": {
      "visual": "ğŸ“‹",
      "text": "Output parsing: converting the AI's natural language response into structured data your code can use. This is the bridge between AI steps and code steps in a workflow."
    },
    "discovery": {
      "visual": "ğŸ’¡",
      "text": "Approaches: (1) Ask the AI to respond in JSON directly. (2) Use JSON mode (model feature). (3) Parse with regex for simple formats. (4) Use a second AI call to extract structure from the first call's output."
    },
    "twist": {
      "visual": "âš¡",
      "text": "Parsing failures are the #1 cause of workflow crashes. The model adds extra text before the JSON, uses single quotes instead of double, or includes comments. Always wrap parsing in try-catch with retry logic."
    },
    "climax": {
      "visual": "ğŸ",
      "text": "Robust parsing: JSON mode â†’ Zod/Pydantic validation â†’ error message back to model for retry â†’ fallback to regex extraction â†’ DLQ if all else fails."
    },
    "punchline": {
      "visual": "ğŸ¬",
      "text": "The AI speaks prose. Your code speaks JSON. Output parsing is the translator."
    }
  },
  "quiz": {
    "question": "What is the #1 cause of AI workflow crashes?",
    "options": [
      "Network failures",
      "Output parsing failures when the model's response doesn't match expected format",
      "Running out of memory",
      "API key expiration"
    ],
    "correct": 1
  }
}
