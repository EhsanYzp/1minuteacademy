{
  "id": "ai--rag-basics--t29-multi-query-retrieval",
  "version": 1,
  "subject": "AI",
  "subcategory": "RAG Basics",
  "course_id": "ai--rag-basics",
  "chapter_id": "ai--rag-basics--ch04-retrieval",
  "title": "Multi-Query Retrieval",
  "emoji": "ğŸ”",
  "color": "#EF4444",
  "description": "Generate multiple query variations to improve retrieval recall.",
  "difficulty": "Advanced",
  "published": true,
  "story": {
    "hook": {
      "visual": "ğŸ”€",
      "text": "A user asks 'How do I fix a memory leak in Python?' The relevant document says 'Python garbage collection and memory management.' One embedding query misses it. Three variations catch it."
    },
    "buildup": {
      "visual": "ğŸ“",
      "text": "Multi-query retrieval uses an LLM to generate 3-5 rephrased versions of the user's query. Each variation captures a different angle of the same intent."
    },
    "discovery": {
      "visual": "ğŸ’¡",
      "text": "'Fix memory leak in Python' becomes: 'Python memory management best practices,' 'garbage collection issues in Python,' and 'diagnosing Python memory problems.' Each query retrieves different relevant chunks."
    },
    "twist": {
      "visual": "âš¡",
      "text": "The cost is 3-5x more embedding calls and vector searches. But the recall improvement is dramatic â€” especially for vague or poorly-worded queries."
    },
    "climax": {
      "visual": "ğŸ",
      "text": "Combine results from all queries, deduplicate, and rank by frequency + score. Chunks retrieved by multiple query variations are almost certainly relevant."
    },
    "punchline": {
      "visual": "ğŸ¬",
      "text": "One question, many angles. Multi-query turns bad searches into great ones."
    }
  },
  "quiz": {
    "question": "What is the main benefit of multi-query retrieval?",
    "options": [
      "It reduces the number of API calls",
      "It improves recall by searching from multiple semantic angles",
      "It eliminates the need for a vector database",
      "It makes responses faster"
    ],
    "correct": 1
  }
}
